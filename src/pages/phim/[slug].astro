---
import { type MovieResponseDetail } from "../../types";
import MovieDetailPage from "../../components/MovieDetailPage.astro";
import Layout from "../../layouts/Layout.astro";
const { slug } = Astro.params;
import "@/styles/globals.css";
import { getSecret } from "astro:env/server";
import { CACHE_CONFIGS, getCacheHeaders } from "@/lib/cache";
const PUBLIC_PHIM_MOI = getSecret("PUBLIC_PHIM_MOI");
const response = await fetch(`${PUBLIC_PHIM_MOI}/phim/${slug}`, {
    cache: "force-cache",
    headers: getCacheHeaders(CACHE_CONFIGS.MOVIE_DETAIL),
});
const data: MovieResponseDetail = await response.json();
---

<Layout title="Chi tiet">
    <MovieDetailPage data={data} slug={slug} />
</Layout>
